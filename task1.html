<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>real time form validation</title>
    <link rel="stylesheet" href="regform.css">
</head>
<body>
    <form id="my regtration form" action="https://uohyd.samarth.edu.in/index.php/dashboard">
        <label>Name:</label>
        <input type="text" id="name"  placeholder="enter name">
        <span class="error" id="please enter valid name"></span>

        <label>Email:</label>
        <input class="text" id="email" placeholder="enter password">
        <span class="error" id="please enter valid error"></span>

        <label>password:</label>
        <input type="password" id="password"  placeholder="enter password">
        <span class="error" id="please enter valid password"></span>
         <div class="strenth" id="strenth"></div>

        <label>Date of birth:</label>
        <input class="date" id="dob"  placeholder="enter date(YYYY-MM-DD)">
        <span class="error" id="please enter valid date of birth"></span>

        <lable>Phone number:</lable>
        <input class="text" id="phone" placeholder="enter phone_number" >
        <span class="error" id="phoneError"></span>
        <!-- <form action="https://uohyd.samarth.edu.in/index.php/dashboard"></form> -->

        <button type="submit">Submit</button>
    </form>
    <script>
          const nameInput = document.getElementById("name");
          const emailInput = document.getElementById("email");
          const passwordInput = document.getElementById("password");
          const dobInput = document.getElementById("dob");
          const phoneInput = document.getElementById("phone");

          nameInput.addEventListener("input", validateName);
          emailInput.addEventListener("input", validateEmail);
          passwordInput.addEventListener("input", validatePassword);
          dobInput.addEventListener("input", validateDOB);
          phoneInput.addEventListener("input", validatePhone);
          document.getElementById("my regitration form").addEventListener("submit", function (e) {
          if (!(validateName() & validateEmail() & validatePassword() & validateDOB() & validatePhone())) {
          e.preventDefault();
          alert("Please fix errors before submitting");
    }
});

function validateName() {
     const regex = /^[A-Za-z ]+$/;
     if (!regex.test(nameInput.value)) {
        document.getElementById("nameError").innerText = "Only alphabets allowed";
        return false;
    }
    document.getElementById("nameError").innerText = "";
    return true;
}
function validateEmail() {
    const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!regex.test(emailInput.value)) {
        document.getElementById("emailError").innerText = "Invalid email format";
        return false;
    }
    document.getElementById("emailError").innerText = "";
    return true;
}
function validatePassword() {
    const pwd = passwordInput.value;
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;

    if (!regex.test(pwd)) {
        document.getElementById("passwordError").innerText =
            "Min 8 chars with upper, lower, number & special";
    } else {
        document.getElementById("passwordError").innerText = "";
    }
     let strength = 0;
    if (pwd.length >= 8) strength++;
    if (/[A-Z]/.test(pwd)) strength++;
    if (/[a-z]/.test(pwd)) strength++;
    if (/\d/.test(pwd)) strength++;
    if (/[\W_]/.test(pwd)) strength++;

    const strengthLevel = Math.min(strength, 5);
    const strengthText = ["Very Weak", "Weak", "Medium", "Good", "Strong"];

    document.getElementById("strength").innerText =
        "Strength: " + strengthText[strengthLevel - 1] || "";

    return regex.test(pwd);
}
 
function validateDOB() {
    const dob = new Date(dobInput.value);
    const today = new Date();

    const age = Math.floor((today - dob) / (1000 * 60 * 60 * 24 * 365.25));

    if (age < 18 || isNaN(age)) {
        document.getElementById("dobError").innerText = "Must be at least 18 years old";
        return false;
    }
    document.getElementById("dobError").innerText = "";
    return true;
}

function validatePhone() {
    const regex = /^\d{10}$/;
    if (!regex.test(phoneInput.value)) {
        document.getElementById("phoneError").innerText =
            "Phone must be exactly 10 digits";
        return false;
    }
    document.getElementById("phoneError").innerText = "";
    return true;
}
 
    </script>
    
</body>
</html>